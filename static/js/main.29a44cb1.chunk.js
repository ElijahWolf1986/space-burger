(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={overlay:"ModalOverlay_overlay__M4729"}},109:function(e,t,n){},11:function(e,t,n){e.exports={login_container:"Authorization_login_container__1H_Pq",login_title:"Authorization_login_title__O69qp",login_button:"Authorization_login_button__1jPdp",login_paragraph:"Authorization_login_paragraph__165XA",login_error:"Authorization_login_error__1wEPq",login_message:"Authorization_login_message__2N0Ef"}},12:function(e,t,n){e.exports={feed:"Feed_feed__I3EXS",feed_title:"Feed_feed_title__LUpDW",feed_orders:"Feed_feed_orders__1b6La",feed_orders_list:"Feed_feed_orders_list__242Wk",feed_order:"Feed_feed_order__3ZCF0",feed_orders_summury:"Feed_feed_orders_summury__2IMot",feed_orders_status:"Feed_feed_orders_status__1Lvf-",feed_orders_title:"Feed_feed_orders_title__2q32K",feed_orders_ready:"Feed_feed_orders_ready__cznh_",feed_orders_work:"Feed_feed_orders_work__1eBJ7",feed_list:"Feed_feed_list__1sP31",feed_orders_work_item:"Feed_feed_orders_work_item__22G4i",feed_orders_ready_item:"Feed_feed_orders_ready_item__3_rqZ",feed_orders_count:"Feed_feed_orders_count__6LTlB",order_count:"Feed_order_count__2D060"}},13:function(e,t,n){e.exports={popup:"TooglePopup_popup__1bWyQ",popup_header:"TooglePopup_popup_header__2DyNo",popup_close_icon:"TooglePopup_popup_close_icon__2K-f0",popup_title:"TooglePopup_popup_title__1qX_l",popup_menu:"TooglePopup_popup_menu__TF2c1",popup_menu_list:"TooglePopup_popup_menu_list__aLdQ0",popup_menu_item:"TooglePopup_popup_menu_item__1CuXR",popup_menu_title:"TooglePopup_popup_menu_title__2BJa1",popup_menu_title_state_active:"TooglePopup_popup_menu_title_state_active__23lSc",popup_menu_personal_throw:"TooglePopup_popup_menu_personal_throw__1U4pD",popup_menu_personal_throw_state_opened:"TooglePopup_popup_menu_personal_throw_state_opened__RFOoB",popup_menu_personal_throw_state_closed:"TooglePopup_popup_menu_personal_throw_state_closed__aM9dx",popup_menu_personal:"TooglePopup_popup_menu_personal__15cB-",popup_menu_personal_list:"TooglePopup_popup_menu_personal_list__3EsWW",popup_menu_personal_item:"TooglePopup_popup_menu_personal_item__2o5mJ",popup_menu_personal_item_state_active:"TooglePopup_popup_menu_personal_item_state_active__2wTfD"}},16:function(e,t,n){e.exports={profile_container:"Profile_profile_container__NAgQL",profile_menu_list:"Profile_profile_menu_list__3iHvY",profile_menu_item:"Profile_profile_menu_item__1JRj4",profile_menu_item_active:"Profile_profile_menu_item_active__1XIF3",profile_info:"Profile_profile_info__2znpr",profile_data:"Profile_profile_data__2yjas",profile_orders:"Profile_profile_orders__1T34Z",profile_orders_list:"Profile_profile_orders_list__5a5YY",profile_orders_container:"Profile_profile_orders_container__1fOcN",profile_order:"Profile_profile_order__2XDYX",profile_orders_menu:"Profile_profile_orders_menu__1ZAtJ",profile_button_container:"Profile_profile_button_container__C4Iuq",profile_button:"Profile_profile_button__3QIal"}},17:function(e,t,n){e.exports={constructor_client:"BurgerConstructor_constructor_client__1C3d5",constructor_client_active:"BurgerConstructor_constructor_client_active__382jf",constructor_hover:"BurgerConstructor_constructor_hover__2qksf",constructor_ingredients:"BurgerConstructor_constructor_ingredients__1R7oC",constructor_bun:"BurgerConstructor_constructor_bun__5jMym",constructor_list:"BurgerConstructor_constructor_list__2Xb6s",constructor_item:"BurgerConstructor_constructor_item__3U4of",constructor_total:"BurgerConstructor_constructor_total__1ERks",constructor_count:"BurgerConstructor_constructor_count__1cmwJ",constructor_currency_icon:"BurgerConstructor_constructor_currency_icon__3HIJL",dragicon:"BurgerConstructor_dragicon__1Esol",constructor_hungry:"BurgerConstructor_constructor_hungry__12lOE",constructor_hungry_active:"BurgerConstructor_constructor_hungry_active__3MT0B",constructor_hungry_paragraph:"BurgerConstructor_constructor_hungry_paragraph__wrwXN",constructor_hungry_img:"BurgerConstructor_constructor_hungry_img__Dyjtt"}},179:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(26),s=n.n(a),o=(n(109),n(96)),i=n.n(o),l=n(7),_=n(13),d=n.n(_),u=n(5),p=n(3),j=n(97),m=n(98),b=function(e,t){return new Date(e).toLocaleDateString("ru-RU",t)};function h(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in n){a+=";  path=/; "+s;var o=n[s];!0!==o&&(a+="="+o)}document.cookie=a}function O(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([ .$?*|{} ( ) [\]\\ / +^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var g=function(){function e(t){Object(j.a)(this,e),this._url=void 0,this._url=t}return Object(m.a)(e,[{key:"_response",value:function(e){return e.json()}},{key:"_handleResponse",value:function(e){return e.ok?e.json():(console.log(e.status),Promise.reject(e))}},{key:"_handleResponseError",value:function(e){return console.log(e),Promise.reject(e)}},{key:"getIngredientList",value:function(){return fetch("".concat(this._url,"/ingredients")).then(this._handleResponse).catch(this._handleResponseError)}},{key:"getOrder",value:function(e){return fetch("".concat(this._url,"/orders"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+O("token")},body:JSON.stringify({ingredients:e})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"getCurrentOrder",value:function(e){return fetch("".concat(this._url,"/orders/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"forgotPassword",value:function(e){return fetch("".concat(this._url,"/password-reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:"".concat(e)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"resetPassword",value:function(e,t){return fetch("".concat(this._url,"/password-reset/reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:"".concat(e),token:"".concat(t)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"registerUser",value:function(e,t,n){return fetch("".concat(this._url,"/auth/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:"".concat(e),password:"".concat(t),name:"".concat(n)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"loginUser",value:function(e,t){return fetch("".concat(this._url,"/auth/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:"".concat(e),password:"".concat(t)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"logout",value:function(e){return fetch("".concat(this._url,"/auth/logout"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:"".concat(e)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"refreshToken",value:function(e){return fetch("".concat(this._url,"/auth/token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:"".concat(e)})}).then(this._handleResponse).catch(this._handleResponseError)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/auth/user"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+O("token")}}).then((function(e){return e.json()})).catch(this._handleResponseError)}},{key:"updateUserInfo",value:function(e,t,n){return fetch("".concat(this._url,"/auth/user"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+O("token")},body:JSON.stringify({name:"".concat(e),email:"".concat(t),password:"".concat(n)})}).then(this._handleResponse).catch(this._handleResponseError)}}]),e}(),f="GET_ITEMS_INGREDIENTS_REQUEST",x="GET_ITEMS_INGREDIENTS_SUCCES",N="GET_ITEMS_INGREDIENTS_FAILED",v="SHOW_ERROR_POPUP",y="HIDE_ERROR_POPUP",I="GET_SELECTED_INGREDIENT_INFO",E="REM_SELECTED_INGREDIENT_INFO",T="GET_ORDER_REQUEST",C="GET_ORDER_SUCCESS",R="GET_ORDER_FAILED",S="REM_ORDER",k="GET_SELECTED_ORDER",w="REM_SELECTED_ORDER",P="SHOW_MENU",D="HIDE_MENU",B="SHOW_PERSONAL_MENU",A="HIDE_PERSONAL_MENU",F="PUT_CLIENT_INGREDIENT",q="REM_CLIENT_INGREDIENT",U="MOVE_CLIENT_INGREDIENT",L="CLEAR_CLIENT_INGREDIENTS",M="CREATE_USER_REQUEST",G="CREATE_USER_SUCCESS",H="CREATE_USER_FAILED",z="GET_USER_PASSWORD_CODE",J="RESET_USER_PASSWORD",W="LOGIN_USER_REQUEST",V="LOGIN_USER_SUCCESS",X="LOGIN_USER_FAILED",Q="REM_USER_INFO",Z="REFRESH_USER_TOKEN",K="GET_USER_INFO_REQUEST",Y="GET_USER_INFO",$="GET_USER_INFO_FAILED",ee="UPDATE_USER_INFO_REQUEST",te="UPDATE_USER_INFO_SUCCESS",ne="UPDATE_USER_INFO_FAILED",re="WS_CONNECTION_SUCCESS",ce="WS_GET_ORDERS",ae="WS_SEND_MESSAGE",se="WS_CONNECTION_ERROR",oe="WS_CONNECTION_CLOSED",ie=function(e){return{type:v,payload:e}},le=function(){return{type:y}},_e="https://norma.nomoreparties.space/api",de=/^(([^<>()[\]\\.,;:\s@ "]+(\.[^<>()[\]\\.,;:\s@ "]+)*)|( ".+ "))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ue={weekday:"long",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},pe=new g(_e),je=function(){return function(e){e({type:f}),pe.getIngredientList().then((function(t){e({type:x,payload:t.data})})).catch((function(t){console.log(t),e(ie(t)),e({type:N})}))}},me=new g(_e),be=function e(){return function(t){t({type:K}),me.getUserInfo().then((function(e){if(!e.success)throw e;t({type:Y,payload:e})})).catch((function(n){"jwt expired"===n.message&&(t(Oe(e())),console.log(n)),t({type:$})}))}},he=function e(t,n,r){return function(c){c({type:ee}),me.updateUserInfo(t,n,r).then((function(e){if(!e.success)throw e;c({type:te,payload:e}),localStorage.setItem("userName",e.user.name)})).catch((function(a){"jwt expired"===a.message&&(c(Oe(e(t,n,r))),console.log(a),c({type:ne}))}))}},Oe=function(e){return function(t){me.refreshToken(localStorage.getItem("refreshToken")).then((function(n){n.accessToken&&n.refreshToken&&(h("token",n.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",n.refreshToken)),t({type:Z,payload:n}),e&&t(e)})).catch((function(e){console.log(e),t(ie(e))}))}},ge=function(e){return{type:F,payload:e}},fe=new g(_e),xe=function(e){return function(t){t({type:T}),t(ie({statusText:"\u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...",title:"\u0438\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"})),fe.getOrder(e).then((function(e){t({type:C,payload:e}),t({type:L}),t(le())})).catch((function(e){console.log(e),t(ie(e)),t({type:R})}))}},Ne=function(){return{type:A}},ve=function(e){return function(t){t(le()),t({type:E}),t({type:S}),t({type:D}),t(Ne()),t({type:w}),e&&t(e)}},ye=n(0),Ie=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return{isTooglePopup:e.menu.isTooglePopup,isTooglePersonal:e.menu.isTooglePersonal}})),n=t.isTooglePopup,r=t.isTooglePersonal;return Object(ye.jsxs)("section",{className:d.a.popup,children:[Object(ye.jsxs)("header",{className:d.a.popup_header,children:[Object(ye.jsx)("p",{className:"".concat(d.a.popup_title," text text_type_main-defaul"),children:"\u041c\u0435\u043d\u044e"}),Object(ye.jsx)("button",{className:d.a.popup_close_icon,onClick:function(){n&&e(ve())},children:" "})]}),Object(ye.jsx)("menu",{className:d.a.popup_menu,children:Object(ye.jsxs)("ul",{className:d.a.popup_menu_list,children:[Object(ye.jsxs)("div",{className:d.a.popup_menu_personal,children:[Object(ye.jsxs)("li",{className:d.a.popup_menu_item,children:[Object(ye.jsx)(u.ProfileIcon,{type:"primary"}),Object(ye.jsx)("p",{className:"".concat(d.a.popup_menu_title," ").concat(d.a.popup_menu_title_state_active),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]}),Object(ye.jsx)("button",{className:"".concat(d.a.popup_menu_personal_throw," ").concat(r?d.a.popup_menu_personal_throw_state_opened:d.a.popup_menu_personal_throw_state_closed),onClick:function(){e(r?Ne():{type:B})}})]}),r&&Object(ye.jsxs)("ul",{className:d.a.popup_menu_personal_list,children:[Object(ye.jsx)("li",{className:"".concat(d.a.popup_menu_personal_item," ").concat(d.a.popup_menu_personal_item_state_active),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ye.jsx)("li",{className:d.a.popup_menu_personal_item,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ye.jsx)("li",{className:d.a.popup_menu_personal_item,children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(ye.jsxs)("li",{className:d.a.popup_menu_item,children:[Object(ye.jsx)(u.BurgerIcon,{type:"secondary"}),Object(ye.jsx)("p",{className:d.a.popup_menu_title,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0431\u0443\u0440\u0433\u0435\u0440\u043e\u0432"})]}),Object(ye.jsxs)("li",{className:d.a.popup_menu_item,children:[Object(ye.jsx)(u.ListIcon,{type:"secondary"}),Object(ye.jsx)("p",{className:d.a.popup_menu_title,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]})})]})},Ee=n(18),Te=n.n(Ee),Ce=n(15),Re=n(9),Se=function(){var e=c.a.useState(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(p.b)(),s=Object(Ce.h)();var o=Object(p.c)((function(e){return{isTooglePopup:e.menu.isTooglePopup}})).isTooglePopup;return c.a.useEffect((function(){var e=localStorage.getItem("userName");r(e)})),Object(ye.jsx)("section",{className:Te.a.header_section,children:Object(ye.jsxs)("header",{className:Te.a.header,children:[Object(ye.jsx)("menu",{className:Te.a.menu,children:Object(ye.jsxs)("ul",{className:Te.a.menu_list,children:[Object(ye.jsx)("li",{className:Te.a.menu_item,children:Object(ye.jsxs)(Re.b,{id:"main",to:"/",children:[Object(ye.jsx)(u.BurgerIcon,{type:"/"===s.pathname?"primary":"secondary"}),Object(ye.jsx)("p",{className:"".concat(Te.a.menu_title," ").concat("/"===s.pathname&&Te.a.menu_title_active),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(ye.jsx)("li",{className:Te.a.menu_item,children:Object(ye.jsxs)(Re.b,{id:"feed",to:"/feed",children:[Object(ye.jsx)(u.ListIcon,{type:s.pathname.indexOf("/feed")>=0?"primary":"secondary"}),Object(ye.jsx)("p",{className:"".concat(Te.a.menu_title," ").concat(s.pathname.indexOf("/feed")>=0&&Te.a.menu_title_active),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(ye.jsx)(Re.b,{to:"/",className:Te.a.logo,children:Object(ye.jsx)(u.Logo,{})}),Object(ye.jsx)("button",{id:"toogle-menu",className:Te.a.toogle_menu,onClick:function(){a({type:P})},children:" "}),o&&Object(ye.jsx)(Ie,{}),Object(ye.jsx)(Re.b,{to:"/profile",children:Object(ye.jsxs)("div",{className:Te.a.profile,children:[Object(ye.jsx)(u.ProfileIcon,{type:s.pathname.indexOf("/profile")>=0?"primary":"secondary"}),Object(ye.jsx)("p",{className:"".concat(Te.a.profile_title," ").concat(s.pathname.indexOf("/profile")>=0&&Te.a.profile_title_active),children:n||"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},ke=n(2),we=n(20),Pe=n.n(we),De=n(40),Be=n.n(De),Ae=n(186);var Fe=function(e){var t=Object(Ce.h)(),n=Object(p.b)(),r=e,c=Object(Ae.a)({type:"dragIngredient",item:r,collect:function(e){return{isDrag:e.isDragging()}}}),a=Object(l.a)(c,2),s=a[0].isDrag,o=a[1];return s?null:Object(ye.jsx)(Re.b,{className:Be.a.ingredient_link,to:{pathname:"/ingredients/".concat(r._id),state:{backgroundIngredient:t}},children:Object(ye.jsxs)("section",{className:Be.a.ingredient,onClick:function(){n(function(e){return{type:I,payload:e}}(r))},ref:o,children:[Object(ye.jsx)(u.Counter,{count:r.count,size:"small"}),Object(ye.jsx)("img",{src:r.image,alt:r.name}),Object(ye.jsxs)("div",{className:Be.a.ingredient_price,children:[Object(ye.jsx)("p",{className:Be.a.ingredient_price_value,children:r.price}),Object(ye.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(ye.jsx)("p",{className:Be.a.ingredient_name,children:r.name})]})})},qe=function(){var e=Object(p.b)(),t=document.getElementById("bun"),n=document.getElementById("sauce"),a=document.getElementById("filling"),s=document.getElementById("ingredients"),o=c.a.useState("one"),i=Object(l.a)(o,2),_=i[0],d=i[1],j=Object(p.c)((function(e){return{ingredients:e.burgerIngredients.ingredients,clientIngredients:e.client.clientIngredients,whatIsBun:e.client.whatIsBun}})),m=j.ingredients,b=j.clientIngredients,h=j.whatIsBun,O=Object(r.useMemo)((function(){return m.map((function(e){return e.count=b.filter((function(t){return t._id===e._id})).length,h&&h._id===e._id&&(e.count+=2),e}))}),[m,b,h]),g=O.filter((function(e){return"bun"===e.type})),f=O.filter((function(e){return"sauce"===e.type})),x=O.filter((function(e){return"main"===e.type}));return c.a.useEffect((function(){e(je())}),[]),Object(ye.jsxs)("section",{id:"BurgerIngredients",className:Pe.a.burger,children:[Object(ye.jsx)("h1",{className:Pe.a.burger_header,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ye.jsxs)("menu",{className:Pe.a.burger_menu,children:[Object(ye.jsx)(u.Tab,{value:"one",active:"one"===_,onClick:function(){t&&t.scrollIntoView({block:"start",behavior:"smooth"}),d("one")},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ye.jsx)(u.Tab,{value:"two",active:"two"===_,onClick:function(){n&&n.scrollIntoView({block:"start",behavior:"smooth"}),d("two")},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ye.jsx)(u.Tab,{value:"three",active:"three"===_,onClick:function(){a&&a.scrollIntoView({block:"start",behavior:"smooth"}),d("three")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(ye.jsxs)("section",{id:"ingredients",className:Pe.a.ingredients,onScroll:function(){var e=t&&s&&Math.abs(t.getBoundingClientRect().top-s.getBoundingClientRect().top),r=n&&s&&Math.abs(n.getBoundingClientRect().top-s.getBoundingClientRect().top),c=a&&s&&Math.abs(a.getBoundingClientRect().top-s.getBoundingClientRect().top);e&&r&&c&&e<r&&e<c&&d("one"),e&&r&&c&&r<e&&r<c&&d("two"),e&&r&&c&&c<e&&c<r&&d("three")},children:[Object(ye.jsxs)("div",{id:"bun",className:Pe.a.ingredients_bun,children:[Object(ye.jsx)("p",{className:Pe.a.ingredients_title,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ye.jsx)("div",{className:Pe.a.ingredients_list,children:g.map((function(e){return Object(ye.jsx)(Fe,Object(ke.a)({},e),e._id)}))})]}),Object(ye.jsxs)("div",{id:"sauce",className:Pe.a.ingredients_sauce,children:[Object(ye.jsx)("p",{className:Pe.a.ingredients_title,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ye.jsx)("div",{className:Pe.a.ingredients_list,children:f.map((function(e){return Object(ye.jsx)(Fe,Object(ke.a)({},e),e._id)}))})]}),Object(ye.jsxs)("div",{id:"filling",className:Pe.a.ingredients_filling,children:[Object(ye.jsx)("p",{className:Pe.a.ingredients_title,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(ye.jsx)("div",{className:Pe.a.ingredients_list,children:x.map((function(e){return Object(ye.jsx)(Fe,Object(ke.a)({},e),e._id)}))})]})]})]})},Ue=n(39),Le=n(17),Me=n.n(Le),Ge=n(187),He=n(29),ze=n.n(He);var Je=function(e){var t=Object(p.b)(),n=Object(r.useRef)(null),c=e._id,a=e.index,s=function(e,n){t(function(e){var t=e.dragIndex,n=e.hoverIndex;return{type:U,payload:{dragIndex:t,hoverIndex:n}}}({dragIndex:e,hoverIndex:n}))},o=Object(Ge.a)({accept:"constructor",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(n.current){var c=e.index,o=a;if(c!==o){var i=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(i.bottom-i.top)/2,_=t.getClientOffset(),d=_&&_.y-i.top;d&&c<o&&d<l||d&&c>o&&d>l||(s(c,o),e.index=o)}}}}),i=Object(l.a)(o,2),_=i[0].handlerId,d=i[1],j=Object(Ae.a)({type:"constructor",item:function(){return{id:c,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(l.a)(j,2),b=m[0].isDragging?0:1;return(0,m[1])(d(n)),Object(ye.jsxs)("section",{style:{opacity:b},className:"".concat(ze.a.container," p-2 ").concat(void 0!==e.bunLock_top&&ze.a.container_bun_top," ").concat(void 0!==e.bunLock_bottom&&ze.a.container_bun_bottom," "),ref:n,"data-handler-id":_,children:[Object(ye.jsxs)("div",{className:"".concat(ze.a.container_ingredient_info),children:[Object(ye.jsx)("img",{className:ze.a.container_ingredient_image,src:e.image,alt:e.name}),Object(ye.jsx)("p",{className:ze.a.container_ingredient_name,children:e.name})]}),Object(ye.jsxs)("div",{className:ze.a.container_ingredient_price,children:[Object(ye.jsx)("p",{className:ze.a.container_ingredient_price_value,children:e.price}),Object(ye.jsx)(u.CurrencyIcon,{type:"primary"}),void 0===e.bunLock?Object(ye.jsx)("button",{id:"delete-button",className:ze.a.container_button_delete,onClick:function(){var n;t((n=e.ingredientId,{type:q,payload:n}))}}):Object(ye.jsx)("div",{className:ze.a.container_lock_icon,children:Object(ye.jsx)(u.LockIcon,{type:"primary"})})]})]})},We=n.p+"static/media/hungry.2d4224fc.png",Ve=function(){var e=Object(p.b)(),t=Object(Ce.g)(),n=localStorage.getItem("refreshToken"),r=Object(p.c)((function(e){return{clientIngredients:e.client.clientIngredients,whatIsBun:e.client.whatIsBun}})),c=r.clientIngredients,a=r.whatIsBun,s=Object(Ge.a)({accept:"dragIngredient",drop:function(t){e(ge(t))},collect:function(e){return{isHover:e.isOver()}}}),o=Object(l.a)(s,2),i=o[0].isHover,_=o[1],d=0,j=Object(Ue.a)(c);c&&!a&&(d=c.reduce((function(e,t){return e+t.price}),0)),c&&a&&(d=c.reduce((function(e,t){return e+t.price}),0)+2*a.price,j.push(a._id,a._id));return Object(ye.jsxs)("section",{id:"dropTarget",className:"".concat(Me.a.constructor),ref:_,children:[Object(ye.jsxs)("div",{className:"".concat(Me.a.constructor_client," ").concat((c.length||a)&&Me.a.constructor_client_active," ").concat(i&&Me.a.constructor_hover),children:[a&&Object(ye.jsx)(Je,Object(ke.a)(Object(ke.a)({},a),{},{bunLock:!0,bunLock_top:!0})),Object(ye.jsx)("div",{className:Me.a.constructor_ingredients,children:Object(ye.jsx)("ul",{className:Me.a.constructor_list,children:c.map((function(e,t){return Object(ye.jsxs)("li",{className:Me.a.constructor_item,children:[" ",Object(ye.jsxs)("div",{className:"".concat(Me.a.dragicon," mb-1"),children:[" ",Object(ye.jsx)(u.DragIcon,{type:"primary"})," "]}),Object(ye.jsx)(Je,Object(ke.a)(Object(ke.a)({},e),{},{index:t}))," "]},e.ingredientId)}))})}),a&&Object(ye.jsx)(Je,Object(ke.a)(Object(ke.a)({},a),{},{bunLock:!0,bunLock_bottom:!0})),Object(ye.jsxs)("div",{className:Me.a.constructor_total,children:[Object(ye.jsxs)("p",{className:Me.a.constructor_count,children:[" ",d," "]}),Object(ye.jsx)("div",{className:Me.a.constructor_currency_icon,children:Object(ye.jsx)(u.CurrencyIcon,{type:"primary"})}),Object(ye.jsx)("div",{onClick:function(){a&&n&&e(xe(j)),!a&&n&&e(ie({statusText:"\u041f\u043e\u043b\u043e\u0436\u0438-\u043a\u0430 \u0431\u0443\u043b\u043e\u0447\u043a\u0443 \u0432 \u0437\u0430\u043a\u0430\u0437 \u0434\u0440\u0443\u0436\u043e\u043a - \u0441 \u043d\u0435\u0439 \u0431\u0443\u0434\u0435\u0442 \u0432\u0435\u0441\u0435\u043b\u0435\u0435!)"})),(a&&!n||!a&&!n)&&t.push("/login")},children:Object(ye.jsx)(u.Button,{type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]}),Object(ye.jsxs)("div",{className:"".concat(Me.a.constructor_hungry," ").concat(!c.length&&!a&&Me.a.constructor_hungry_active," ").concat(i&&Me.a.constructor_hover),children:[Object(ye.jsxs)("p",{className:Me.a.constructor_hungry_paragraph,children:[" ","\u0425\u043e\u0447\u0435\u0448\u044c \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?"," "]}),Object(ye.jsxs)("p",{className:Me.a.constructor_hungry_paragraph,children:[" ","\u041f\u043e\u043b\u043e\u0436\u0438 \u0432 \u043c\u0435\u043d\u044f \u0435\u0434\u0443! )"," "]}),Object(ye.jsx)("img",{className:Me.a.constructor_hungry_img,src:We,alt:"hungry smile"})]})]})},Xe=n(33),Qe=n.n(Xe),Ze=n(100),Ke=n.n(Ze);var Ye=function(e){return Object(ye.jsx)("div",{className:Ke.a.overlay,onClick:e.onClose})},$e=function(){var e=Object(p.c)((function(e){return{error:e.errors.error}})).error,t=Object(p.b)();function n(){t(ve())}var r=401===e.status?"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b":"",c=403===e.status?"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u0440\u0443\u0436\u043e\u043a!":"";return Object(ye.jsxs)("section",{className:"".concat(Qe.a.err_popup," ").concat(e.status&&Qe.a.err_popup_active),children:[Object(ye.jsx)(Ye,{onClose:n}),Object(ye.jsxs)("div",{className:Qe.a.err_popup_container,children:[Object(ye.jsx)("button",{className:Qe.a.err_popup_close_icon,onClick:n,children:" "}),Object(ye.jsxs)("h2",{className:Qe.a.err_popup_title,children:[" ",e.title?e.title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c:"]}),Object(ye.jsxs)("p",{className:Qe.a.err_popup_paragraph,children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0432\u0435\u0442\u0430: ",e.status," ",e.statusText]}),Object(ye.jsxs)("p",{className:Qe.a.err_popup_paragraph,children:[r," ",c]})]})]})},et=n(6),tt=n.n(et),nt=n(36),rt=n.n(nt);var ct=function(e){var t=Object(Ce.g)(),n=Object(p.b)(),r=function(){t.goBack()};function a(){"goBack"===e.type?n(ve(r)):n(ve())}return c.a.useEffect((function(){function e(e){27===e.keyCode&&a()}return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e,!1)}}),[]),Object(ye.jsxs)("section",{className:"".concat(rt.a.modal," ").concat(e.isModal&&rt.a.modal_active),children:[Object(ye.jsx)(Ye,{onClose:a}),Object(ye.jsxs)("div",{className:rt.a.modal_container,children:[Object(ye.jsxs)("header",{className:"".concat(rt.a.modal_header," m-5"),children:[Object(ye.jsx)("h3",{className:rt.a.modal_title,children:e.header}),Object(ye.jsx)("button",{className:rt.a.modal_close_icon,onClick:a,children:" "})]}),Object(ye.jsx)("div",{id:"test",children:e.children})]})]})},at=document.getElementById("modal"),st=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return{currentIngredient:e.burgerIngredient.currentIngredient}})).currentIngredient;var n=!!t;return at&&s.a.createPortal(Object(ye.jsx)(ct,{isModal:n,header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",type:"goBack",children:Object(ye.jsxs)("div",{className:tt.a.ingredient_container,children:[Object(ye.jsx)("img",{src:t?t.image:"#",alt:t?t.name:"",className:tt.a.ingredient_image}),Object(ye.jsx)("p",{className:tt.a.ingredient_title,children:t?t.name:""}),Object(ye.jsxs)("ul",{className:tt.a.ingredient_list,children:[Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:t?t.calories:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:t?t.proteins:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:t?t.fat:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:t?t.carbohydrates:""})]})]}),Object(ye.jsx)("div",{className:tt.a.ingredient_button,onClick:function(){t&&(e(ge(t)),e(ve(t)))},children:Object(ye.jsx)(u.Button,{type:"primary",size:"large",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u0430\u0437"})})]})}),at)},ot=document.getElementById("modal"),it=function(){var e=Object(Ce.g)(),t=Object(p.b)(),n=Object(Ce.i)().id,r=Object(p.c)((function(e){return{ingredients:e.burgerIngredients.ingredients}})).ingredients.filter((function(e){return e._id===n}))[0];return c.a.useEffect((function(){t(je())}),[]),ot&&s.a.createPortal(Object(ye.jsx)("section",{className:tt.a.ingredient_section,children:Object(ye.jsxs)("div",{className:tt.a.ingredient_container,children:[Object(ye.jsx)("img",{src:r?r.image:"#",alt:r?r.name:"",className:tt.a.ingredient_image}),Object(ye.jsx)("p",{className:tt.a.ingredient_title,children:r?r.name:""}),Object(ye.jsxs)("ul",{className:tt.a.ingredient_list,children:[Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:r?r.calories:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:r?r.proteins:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:r?r.fat:""})]}),Object(ye.jsxs)("li",{className:tt.a.ingredient_item,children:[Object(ye.jsx)("p",{className:tt.a.ingredient_consist_name,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ye.jsx)("p",{className:tt.a.ingredient_consist_value,children:r?r.carbohydrates:""})]})]}),Object(ye.jsx)("div",{className:tt.a.ingredient_button,onClick:function(){t(ge(r)),t(ve(r)),e.push("/")},children:Object(ye.jsx)(u.Button,{type:"primary",size:"large",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u0430\u0437"})})]})}),ot)},lt=n(34),_t=n.n(lt),dt=n.p+"static/media/success_icon.fe6ae2df.png",ut=document.getElementById("modal");var pt=function(){var e=Object(p.c)((function(e){return{order:e.order.order}})).order,t=e&&e.order.number,n=!!e;return ut&&s.a.createPortal(Object(ye.jsx)(ct,{isModal:n,type:"order",children:Object(ye.jsxs)("div",{className:_t.a.order_container,children:[Object(ye.jsx)("p",{className:_t.a.order_number,children:e?t:""}),Object(ye.jsx)("p",{className:_t.a.order_title,children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ye.jsx)("img",{src:dt,alt:"\u0443\u0440\u0430, \u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\u0441\u044c",className:_t.a.order_success_icon}),Object(ye.jsx)("p",{className:_t.a.order_success,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ye.jsx)("p",{className:_t.a.order_alias,children:e?e.name:""}),Object(ye.jsx)("p",{className:_t.a.order_info,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})}),ut)},jt=n(8),mt=n.n(jt),bt=n(48),ht=n.n(bt);var Ot=function(){return Object(ye.jsxs)("div",{className:"".concat(ht.a.preloader," \n            ").concat(ht.a.preloader_state_active),children:[Object(ye.jsx)("i",{className:ht.a.circle_preloader}),Object(ye.jsx)("p",{className:ht.a.preloader__paragraph,children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})};var gt=function(){var e=Object(p.b)(),t=new g(_e),n=c.a.useState(),r=Object(l.a)(n,2),a=r[0],s=r[1],o=Object(Ce.i)().id,i=Object(p.c)((function(e){return{ingredients:e.burgerIngredients.ingredients}})).ingredients,_=i&&a&&a.ingredients.map((function(e){return i.find((function(t){return t._id===e}))})),d=a&&b(a.createdAt,ue),j=_&&i&&_.reduce((function(e,t){return e+t.price}),0);return c.a.useEffect((function(){e(je()),t.getCurrentOrder(o).then((function(e){s(e.orders[0])})).catch((function(t){console.log(t),e(ie(t))}))}),[]),a?Object(ye.jsxs)("section",{className:mt.a.order_item,children:[Object(ye.jsxs)("p",{className:mt.a.order_number,children:["#",a.number]}),Object(ye.jsx)("p",{className:mt.a.order_item_name,children:a.name}),Object(ye.jsx)("p",{className:"".concat(mt.a.order_status," ").concat("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"===a.status&&mt.a.order_status_finished," ").concat("\u041e\u0442\u043c\u0435\u043d\u0435\u043d"===a.status&&mt.a.order_status_cancelled),children:"done"===a.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(ye.jsx)("p",{className:mt.a.order_title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ye.jsx)("div",{className:mt.a.order_ingredients_container,children:a&&_&&_.map((function(e,t){return Object(ye.jsxs)("div",{className:mt.a.order_ingredient_item,children:[Object(ye.jsxs)("div",{className:mt.a.order_ingredient_container,children:[Object(ye.jsx)("img",{className:"".concat(mt.a.order_ingredient_img),src:e.image_mobile,alt:e.name}),Object(ye.jsx)("p",{className:mt.a.order_ingredient_name,children:e.name})]}),Object(ye.jsxs)("div",{className:mt.a.order_price_container,children:[Object(ye.jsxs)("p",{className:mt.a.order_price,children:["1 x ",e.price]}),Object(ye.jsx)(u.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(ye.jsxs)("div",{className:mt.a.order_total,children:[Object(ye.jsx)("p",{className:mt.a.order_date,children:d}),Object(ye.jsxs)("div",{className:mt.a.order_price_container,children:[Object(ye.jsx)("p",{className:mt.a.order_price,children:j}),Object(ye.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]}):Object(ye.jsx)(Ot,{})},ft=document.getElementById("modal");var xt=function(){var e=!!Object(p.c)((function(e){return{currentOrder:e.order.currentOrder}})).currentOrder;return ft&&s.a.createPortal(Object(ye.jsx)(ct,{isModal:e,type:"goBack",header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",children:Object(ye.jsx)("section",{className:mt.a.order_container,children:Object(ye.jsx)(gt,{})})}),ft)},Nt=n(185),vt=n(102),yt=n(103),It=function(e){var t=e.children,n=Object(yt.a)(e,["children"]),r=localStorage.getItem("refreshToken");return Object(ye.jsx)(Ce.b,Object(ke.a)(Object(ke.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(ye.jsx)(Ce.a,{to:{pathname:"/login",state:{from:n}}})}}))},Et=n(30),Tt=n.n(Et);var Ct=function(e){var t=e.placeholder,n=e.type,r=e.value,a=e.handleChange,s=e.isRequired,o=e.custom,i=c.a.useState(n),_=Object(l.a)(i,2),d=_[0],u=_[1],p=function(){u("password"===d?"show-password":"password")},j=o?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("label",{className:Tt.a.input_profile_label,children:t}),Object(ye.jsx)("input",{type:d,value:r||"",onChange:a,required:s,className:"".concat(Tt.a.input," ").concat(Tt.a.input_profile)}),"password"===d&&r||"show-password"===d&&r?Object(ye.jsx)("div",{className:Tt.a.input_eye,onClick:p}):Object(ye.jsx)("div",{className:Tt.a.input_pencil})]}):Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("label",{className:Tt.a.input_label,children:r?"":t}),Object(ye.jsx)("input",{type:d,value:r||"",onChange:a,required:s,className:Tt.a.input}),("password"===d&&r||"show-password"===d&&r)&&Object(ye.jsx)("div",{className:Tt.a.input_eye,onClick:p})]});return Object(ye.jsx)("section",{className:Tt.a.input_container,children:j})},Rt=n(11),St=n.n(Rt),kt=function(){var e=Object(Ce.h)(),t=Object(p.c)((function(e){return{success:e.user.success,userName:e.user.user.name}})),n=t.success,r=t.userName,a=Object(p.b)(),s=c.a.useState(""),o=Object(l.a)(s,2),i=o[0],_=o[1],d=c.a.useState(""),j=Object(l.a)(d,2),m=j[0],b=j[1],O=c.a.useState(""),g=Object(l.a)(O,2),f=g[0],x=g[1],N=i?i.match(de):"null";return localStorage.getItem("refreshToken")?Object(ye.jsx)(Ce.a,{to:e.state?e.state.from.pathname:"/"}):Object(ye.jsxs)("form",{className:St.a.login_container,onSubmit:function(e){return e.preventDefault(),i&&m?null===N?(x("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0447\u0442\u044b"),void setTimeout((function(){return x("")}),3e3)):(a(function(e){var t=e.email,n=e.password;return function(e){e({type:W}),me.loginUser(t,n).then((function(t){t.accessToken&&t.refreshToken&&(h("token",t.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",t.refreshToken),localStorage.setItem("userName",t.user.name)),e({type:V,payload:t})})).catch((function(t){console.log(t),e(ie(t)),e({type:X})}))}}({email:i,password:m})),_(""),void b("")):(x("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"),void setTimeout((function(){return x("")}),3e3))},noValidate:!0,children:[Object(ye.jsx)("h2",{className:St.a.login_title,children:"\u0412\u0445\u043e\u0434"}),Object(ye.jsx)("span",{className:St.a.login_error,children:f}),Object(ye.jsx)("span",{className:St.a.login_message,children:n&&r?"\u0423\u0440\u0430 ".concat(r," \u0432\u044b \u0437\u0430\u0448\u043b\u0438 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442!"):""}),Object(ye.jsx)(Ct,{type:"email",isRequired:!0,placeholder:"E-mail",value:i,handleChange:function(e){var t=e.target;_(t.value)}}),Object(ye.jsx)(Ct,{type:"password",isRequired:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,handleChange:function(e){var t=e.target;b(t.value)}}),Object(ye.jsx)("div",{className:St.a.login_button,children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0412\u043e\u0439\u0442\u0438"," "]})}),Object(ye.jsxs)("p",{className:St.a.login_paragraph,children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(ye.jsx)(Re.b,{to:"/registration",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})," "]}),Object(ye.jsxs)("p",{className:St.a.login_paragraph,children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(ye.jsx)(Re.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})," "]})]})},wt=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return{success:e.user.success}})).success,n=c.a.useState(""),r=Object(l.a)(n,2),a=r[0],s=r[1],o=c.a.useState(""),i=Object(l.a)(o,2),_=i[0],d=i[1],j=c.a.useState(""),m=Object(l.a)(j,2),b=m[0],O=m[1],g=c.a.useState(""),f=Object(l.a)(g,2),x=f[0],N=f[1],v=_?_.match(de):"null";return localStorage.getItem("refreshToken")?Object(ye.jsx)(Ce.a,{to:{pathname:"/"}}):Object(ye.jsxs)("form",{className:St.a.login_container,onSubmit:function(t){return t.preventDefault(),_&&b&&a?null===v?(N("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0447\u0442\u044b"),void setTimeout((function(){return N("")}),3e3)):(e(function(e){var t=e.email,n=e.password,r=e.name;return function(e){e({type:M}),me.registerUser(t,n,r).then((function(t){t.accessToken&&t.refreshToken&&(h("token",t.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",t.refreshToken),localStorage.setItem("userName",t.user.name)),e({type:G,payload:t})})).catch((function(t){console.log(t),e(ie(t)),e({type:H})}))}}({name:a,email:_,password:b})),s(""),d(""),void O("")):(N("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"),void setTimeout((function(){return N("")}),3e3))},noValidate:!0,children:[Object(ye.jsx)("h2",{className:St.a.login_title,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ye.jsx)("span",{className:St.a.login_error,children:x}),Object(ye.jsx)("span",{className:St.a.login_message,children:t?"\u0423\u0440\u0430 \u0432\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u043b\u0438\u0441\u044c!":""}),Object(ye.jsx)(Ct,{type:"text",isRequired:!0,placeholder:"\u0418\u043c\u044f",value:a,handleChange:function(e){var t=e.target;s(t.value)}}),Object(ye.jsx)(Ct,{type:"email",isRequired:!0,placeholder:"E-mail",value:_,handleChange:function(e){var t=e.target;d(t.value)}}),Object(ye.jsx)(Ct,{type:"password",isRequired:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:b,handleChange:function(e){var t=e.target;O(t.value)}}),Object(ye.jsx)("div",{className:St.a.login_button,children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"," "]})}),Object(ye.jsxs)("p",{className:St.a.login_paragraph,children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(ye.jsx)(Re.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})," "]})]})},Pt=function(){var e=Object(Ce.h)(),t=Object(p.c)((function(e){return{message:e.user.message,success:e.user.success}})),n=t.message,r=t.success,a=Object(p.b)(),s=c.a.useState(""),o=Object(l.a)(s,2),i=o[0],_=o[1],d=c.a.useState(""),j=Object(l.a)(d,2),m=j[0],b=j[1],h=i?i.match(de):"null",O=localStorage.getItem("refreshToken");return r&&"Reset email sent"===n?Object(ye.jsx)(Ce.a,{to:{pathname:"/reset-password",state:{from:e}}}):O?Object(ye.jsx)(Ce.a,{to:{pathname:"/"}}):Object(ye.jsxs)("form",{className:St.a.login_container,onSubmit:function(e){return e.preventDefault(),i?null===h?(b("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0447\u0442\u044b"),void setTimeout((function(){return b("")}),3e3)):(a(function(e){return function(t){me.forgotPassword(e).then((function(e){t({type:z,payload:e})})).catch((function(e){console.log(e),t(ie(e))}))}}(i)),void _("")):(b("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u043e\u0447\u0442\u0443"),void setTimeout((function(){return b("")}),3e3))},noValidate:!0,children:[Object(ye.jsx)("h2",{className:St.a.login_title,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ye.jsx)("span",{className:St.a.login_error,children:m}),Object(ye.jsx)(Ct,{type:"email",isRequired:!0,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:i,handleChange:function(e){var t=e.target;_(t.value)}}),Object(ye.jsx)("div",{className:St.a.login_button,children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"," "]})}),Object(ye.jsxs)("p",{className:St.a.login_paragraph,children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(ye.jsx)(Re.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})," "]})]})},Dt=function(){var e=Object(Ce.h)(),t=Object(Ce.g)(),n=Object(p.c)((function(e){return{message:e.user.message,success:e.user.success}})),r=n.message,a=n.success,s=Object(p.b)(),o=c.a.useState(""),i=Object(l.a)(o,2),_=i[0],d=i[1],j=c.a.useState(""),m=Object(l.a)(j,2),b=m[0],h=m[1],O=c.a.useState(""),g=Object(l.a)(O,2),f=g[0],x=g[1];return localStorage.getItem("refreshToken")?Object(ye.jsx)(Ce.a,{to:{pathname:"/"}}):(a&&"Password successfully reset"===r&&t.push("/login"),e.state||t.push("/"),Object(ye.jsxs)("form",{className:St.a.login_container,onSubmit:function(e){if(e.preventDefault(),!_||!b)return x("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u0431\u0430 \u043f\u043e\u043b\u044f"),void setTimeout((function(){return x("")}),3e3);s(function(e,t){return function(n){me.resetPassword(e,t).then((function(e){n({type:J,payload:e})})).catch((function(e){console.log(e),n(ie(e))}))}}(b,_)),h(""),d("")},noValidate:!0,children:[Object(ye.jsx)("h2",{className:St.a.login_title,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ye.jsx)("span",{className:St.a.login_error,children:f}),Object(ye.jsx)(Ct,{type:"password",isRequired:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:b,handleChange:function(e){var t=e.target;h(t.value)}}),Object(ye.jsx)(Ct,{type:"text",isRequired:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:_,handleChange:function(e){var t=e.target;d(t.value)}}),Object(ye.jsx)("div",{className:St.a.login_button,children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"," "]})}),Object(ye.jsxs)("p",{className:St.a.login_paragraph,children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(ye.jsx)(Re.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})," "]})]}))},Bt=n(12),At=n.n(Bt);var Ft,qt=function(e){var t=e.order,n=Object(p.b)(),r=Object(p.c)((function(e){return{ingredients:e.burgerIngredients.ingredients}})).ingredients,c=t.ingredients.map((function(e){return r.find((function(t){return t._id===e}))})),a=c&&c.reduce((function(e,t){return e+t.price}),0),s=b(t.createdAt,ue);return Object(ye.jsxs)("section",{className:mt.a.order,onClick:function(){n({type:k,payload:t})},children:[Object(ye.jsxs)("div",{className:mt.a.order_header,children:[Object(ye.jsxs)("p",{className:mt.a.order_number,children:["#",t.number]}),Object(ye.jsx)("p",{className:mt.a.order_date,children:s})]}),Object(ye.jsx)("p",{className:mt.a.order_name,children:t.name}),Object(ye.jsx)("p",{className:"".concat(mt.a.order_status," ").concat("done"===t.status&&mt.a.order_status_finished," ").concat("pending"===t.status&&mt.a.order_status_cancelled),children:"done"===t.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(ye.jsxs)("div",{className:mt.a.order_ingredients,children:[Object(ye.jsx)("div",{className:mt.a.order_img_container,children:c.map((function(e,t){return Object(ye.jsx)("img",{className:"".concat(mt.a.order_img),src:e.image_mobile,alt:e.name,style:{zIndex:Math.abs(t-100)}},t)}))}),Object(ye.jsxs)("div",{className:mt.a.order_price_container,children:[Object(ye.jsx)("p",{className:mt.a.order_price,children:a}),Object(ye.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},Ut=n(32),Lt=n(101),Mt={user:{email:"",password:"",name:""},success:!1,accessToken:null,refreshToken:null,message:null,userRequest:!1,userRequestFail:!1},Gt={order:null,isOrderPopup:!1,orderRequest:!1,orderFailed:!1,currentOrder:null},Ht={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1},zt={isTooglePopup:!1,isTooglePersonal:!1},Jt={currentIngredient:null},Wt={error:{}},Vt=n(188),Xt={clientIngredients:[],whatIsBun:null},Qt={wsConnected:!1,wsError:!1,Data:{orders:[],total:0,totalToday:0}},Zt=Object(Ut.b)({burgerIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(ke.a)(Object(ke.a)({},e),{},{ingredientsRequest:!0});case x:return Object(ke.a)(Object(ke.a)({},e),{},{ingredientsFailed:!1,ingredients:t.payload,ingredientsRequest:!1});case N:return Object(ke.a)(Object(ke.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});default:return Object(ke.a)({},e)}},burgerIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(ke.a)(Object(ke.a)({},e),{},{currentIngredient:t.payload});case E:return Object(ke.a)(Object(ke.a)({},e),{},{currentIngredient:null});default:return Object(ke.a)({},e)}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(ke.a)(Object(ke.a)({},e),{},{error:t.payload});case y:return Object(ke.a)(Object(ke.a)({},e),{},{error:{}});default:return Object(ke.a)({},e)}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(ke.a)(Object(ke.a)({},e),{},{orderRequest:!0});case C:return Object(ke.a)(Object(ke.a)({},e),{},{orderFailed:!1,order:t.payload,orderRequest:!1,isOrderPopup:!0});case R:return Object(ke.a)(Object(ke.a)({},e),{},{orderFailed:!0,orderRequest:!1});case k:return Object(ke.a)(Object(ke.a)({},e),{},{currentOrder:t.payload});case w:return Object(ke.a)(Object(ke.a)({},e),{},{currentOrder:null});case S:return Object(ke.a)(Object(ke.a)({},e),{},{orderFailed:!1,orderRequest:!1,order:null});default:return Object(ke.a)({},e)}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(ke.a)(Object(ke.a)({},e),{},{isTooglePopup:!0,isTooglePersonal:!1});case D:return Object(ke.a)(Object(ke.a)({},e),{},{isTooglePopup:!1,isTooglePersonal:!1});case B:return Object(ke.a)(Object(ke.a)({},e),{},{isTooglePersonal:!0});case A:return Object(ke.a)(Object(ke.a)({},e),{},{isTooglePersonal:!1});default:return Object(ke.a)({},e)}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return"bun"===t.payload.type?Object(ke.a)(Object(ke.a)({},e),{},{whatIsBun:t.payload}):Object(ke.a)(Object(ke.a)({},e),{},{clientIngredients:[].concat(Object(Ue.a)(e.clientIngredients),[Object(ke.a)(Object(ke.a)({},t.payload),{},{ingredientId:Object(Vt.a)()})])});case q:return Object(ke.a)(Object(ke.a)({},e),{},{clientIngredients:Object(Ue.a)(e.clientIngredients.filter((function(e){return e.ingredientId!==t.payload})))});case U:var n=t.payload,r=n.dragIndex,c=n.hoverIndex,a=Object(Ue.a)(e.clientIngredients);return a.splice(r,0,a.splice(c,1)[0]),Object(ke.a)(Object(ke.a)({},e),{},{clientIngredients:a});case L:return Object(ke.a)(Object(ke.a)({},e),{},{clientIngredients:[],whatIsBun:null});default:return Object(ke.a)({},e)}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!0});case G:var n=t.payload,r=n.success,c=n.user,a=n.accessToken,s=n.refreshToken;return Object(ke.a)(Object(ke.a)({},e),{},{success:r,user:c,accessToken:a,refreshToken:s,userRequest:!1,userRequestFail:!1});case H:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!1,userRequestFail:!0});case K:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!0});case Y:var o=t.payload,i=o.success,l=o.user;return Object(ke.a)(Object(ke.a)({},e),{},{success:i,user:l,userRequest:!1,userRequestFail:!1});case $:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!1,userRequestFail:!0});case z:var _=t.payload,d=_.success,u=_.message;return Object(ke.a)(Object(ke.a)({},e),{},{success:d,message:u});case J:var p=t.payload,j=p.success,m=p.message;return Object(ke.a)(Object(ke.a)({},e),{},{success:j,message:m});case W:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!0});case V:var b=t.payload,h=b.success,O=b.user,g=b.accessToken,f=b.refreshToken;return Object(ke.a)(Object(ke.a)({},e),{},{success:h,user:O,accessToken:g,refreshToken:f,userRequest:!1,userRequestFail:!1});case X:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!1,userRequestFail:!0});case Q:var x=t.payload,N=x.success,v=x.message;return Object(ke.a)(Object(ke.a)({},e),{},{user:{email:"",password:"",name:""},success:N,accessToken:null,refreshToken:null,message:v,userRequest:!1,userRequestFail:!1});case Z:var y=t.payload,I=y.success,E=y.accessToken,T=y.refreshToken;return Object(ke.a)(Object(ke.a)({},e),{},{success:I,accessToken:E,refreshToken:T,userRequest:!1,userRequestFail:!1});case ee:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!0});case te:var C=t.payload,R=C.success,S=C.user;return Object(ke.a)(Object(ke.a)({},e),{},{success:R,user:S,userRequest:!1,userRequestFail:!1});case ne:return Object(ke.a)(Object(ke.a)({},e),{},{userRequest:!1,userRequestFail:!0});default:return Object(ke.a)({},e)}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(ke.a)(Object(ke.a)({},e),{},{wsConnected:!0});case se:return Object(ke.a)(Object(ke.a)({},e),{},{wsConnected:!1,wsError:!0});case oe:return Object(ke.a)(Object(ke.a)({},e),{},{wsConnected:!1,wsError:!1});case ce:return Object(ke.a)(Object(ke.a)({},e),{},{Data:t.payload});default:return e}}}),Kt={wsStart:"WS_CONNECTION_START",wsSendMessage:ae,onOpen:re,wsClose:"WS_CONNECTION_END",onClose:oe,onError:se,onGetOrders:ce,wsPingPong:"WS_SEND_PONG"},Yt=(Ft=Kt,function(e){var t=null;return function(n){return function(r){var c=e.dispatch,a=r.type,s=r.payload,o=Ft.wsStart,i=Ft.wsSendMessage,l=Ft.onOpen,_=Ft.onClose,d=Ft.onError,u=Ft.onGetOrders,p=Ft.wsClose,j=Ft.wsPingPong;if(a===o&&((t=new WebSocket(r.payload)).onopen=function(e){console.log("open session ws"),console.log(e),c({type:l,payload:e})},t.onerror=function(e){console.log("there is an error"),console.log(e),c({type:d,payload:e})},t.onmessage=function(e){console.log("message"),console.log(e);var t=e.data,n=JSON.parse(t);c({type:u,payload:Object(ke.a)(Object(ke.a)({},n),{},{timestamp:(new Date).getTime()/100})})},t.onclose=function(e){console.log("close"),console.log(e),c({type:_,payload:e})}),p&&a===p&&t&&(t.close(),t=null),i&&a===i&&t){var m,b=Object(ke.a)(Object(ke.a)({},s),{},{token:null===(m=O("accessToken"))||void 0===m?void 0:m.replace("Bearer ","")});t.send(JSON.stringify(b))}j&&a===j&&t&&t.send("pong"),n(r)}}}),$t=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:Ut.c)(Object(Ut.a)(Lt.a,Yt)),en=Object(Ut.d)(Zt,$t),tn=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return{wsDataOrders:e.ws.Data,wsConnected:e.ws.wsConnected}})),n=t.wsDataOrders,r=t.wsConnected,a=Object(Ce.h)(),s=n&&n.orders;c.a.useEffect((function(){return e(je()),e({type:Kt.wsStart,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e({type:Kt.wsClose})}}),[]);var o=s&&s.filter((function(e){return"done"===e.status})),i=s&&s.filter((function(e){return"pending"===e.status}));return r&&s?Object(ye.jsxs)("section",{className:At.a.feed,children:[Object(ye.jsx)("h1",{className:At.a.feed_title,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ye.jsxs)("div",{className:At.a.feed_orders,children:[Object(ye.jsx)("ul",{className:At.a.feed_orders_list,children:s.map((function(e){return Object(ye.jsx)("li",{className:At.a.feed_order,children:Object(ye.jsx)(Re.b,{to:{pathname:"/feed/".concat(e.number),state:{backgroundOrder:a}},children:Object(ye.jsx)(qt,{order:e})})},e._id)}))}),Object(ye.jsxs)("div",{className:At.a.feed_orders_summury,children:[Object(ye.jsxs)("div",{className:At.a.feed_orders_status,children:[Object(ye.jsxs)("div",{className:At.a.feed_orders_ready,children:[Object(ye.jsx)("p",{className:At.a.feed_orders_title,children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(ye.jsx)("ul",{className:At.a.feed_list,children:o.map((function(e,t){if(t<10)return Object(ye.jsx)("li",{className:At.a.feed_orders_ready_item,children:e.number},e._id)}))})]}),Object(ye.jsxs)("div",{className:At.a.feed_orders_ready,children:[Object(ye.jsx)("p",{className:At.a.feed_orders_title,children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(ye.jsx)("ul",{className:At.a.feed_list,children:o.map((function(e,t){if(t>9&&t<20)return Object(ye.jsx)("li",{className:At.a.feed_orders_ready_item,children:e.number},e._id)}))})]}),Object(ye.jsxs)("div",{className:At.a.feed_orders_work,children:[Object(ye.jsx)("p",{className:At.a.feed_orders_title,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(ye.jsx)("ul",{className:At.a.feed_list,children:i.map((function(e,t){if(!(t>10))return Object(ye.jsx)("li",{className:At.a.feed_orders_work_item,children:e.number},e._id)}))})]})]}),Object(ye.jsxs)("div",{className:At.a.order_count,children:[Object(ye.jsx)("p",{className:At.a.feed_orders_title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(ye.jsx)("p",{className:At.a.feed_orders_count,children:n?n.total-1:"none"})]}),Object(ye.jsxs)("div",{className:At.a.order_count,children:[Object(ye.jsx)("p",{className:At.a.feed_orders_title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(ye.jsx)("p",{className:At.a.feed_orders_count,children:n?n.totalToday-1:"none"})]})]})]})]}):Object(ye.jsx)(Ot,{})},nn=c.a.memo(tn),rn=n(16),cn=n.n(rn);var an=function(){var e=Object(p.b)(),t=localStorage.getItem("refreshToken"),n=Object(Ce.h)(),r=Object(Ce.g)();return Object(ye.jsxs)("div",{className:cn.a.profile_menu,children:[Object(ye.jsxs)("ul",{className:cn.a.profile_menu_list,children:[Object(ye.jsx)(Re.b,{to:"/profile",children:Object(ye.jsx)("li",{className:"".concat(cn.a.profile_menu_item," ").concat("/profile"===n.pathname&&cn.a.profile_menu_item_active),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(ye.jsx)(Re.b,{to:"/profile/orders",children:Object(ye.jsx)("li",{className:"".concat(cn.a.profile_menu_item," ").concat("/profile/orders"===n.pathname&&cn.a.profile_menu_item_active),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(ye.jsx)("li",{className:cn.a.profile_menu_item,onClick:function(){e(function(e){return function(t){me.logout(e).then((function(e){t({type:Q,payload:e}),h("token",""),localStorage.removeItem("refreshToken"),localStorage.removeItem("userName")})).catch((function(e){console.log(e),t(ie(e))}))}}(t)),localStorage.removeItem("refreshToken"),r.push("/login")},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(ye.jsx)("p",{className:cn.a.profile_info,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \xa0 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})};var sn=function(){var e=Object(p.c)((function(e){return{userName:e.user.user.name,userEmail:e.user.user.email}})),t=e.userName,n=e.userEmail,r=c.a.useState(""),a=Object(l.a)(r,2),s=a[0],o=a[1],i=c.a.useState(""),_=Object(l.a)(i,2),d=_[0],j=_[1],m=c.a.useState(""),b=Object(l.a)(m,2),h=b[0],O=b[1],g=Object(p.b)();return c.a.useEffect((function(){g(be())}),[]),c.a.useEffect((function(){o(t),j(n)}),[t,n]),Object(ye.jsxs)("section",{className:cn.a.profile_container,onSubmit:function(e){e.preventDefault(),g(he(s,d,h))},children:[Object(ye.jsx)(an,{}),Object(ye.jsxs)("form",{className:cn.a.profile_data,noValidate:!0,children:[Object(ye.jsx)(Ct,{type:"text",isRequired:!0,placeholder:"\u0418\u043c\u044f",value:s,handleChange:function(e){var t=e.target;o(t.value)},custom:!0}),Object(ye.jsx)(Ct,{type:"email",isRequired:!0,placeholder:"E-mail",value:d,handleChange:function(e){var t=e.target;j(t.value)},custom:!0}),Object(ye.jsx)(Ct,{type:"password",isRequired:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:h,handleChange:function(e){var t=e.target;O(t.value)},custom:!0}),Object(ye.jsxs)("div",{className:cn.a.profile_button_container,children:[Object(ye.jsx)("div",{className:cn.a.profile_button,children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"," "]})}),Object(ye.jsx)("div",{className:cn.a.profile_button,onClick:function(){o(t),j(n)},children:Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u041e\u0442\u043c\u0435\u043d\u0430"," "]})})]})]})]})},on=function(){var e=Object(Ce.h)(),t=Object(p.b)(),n=O("token"),r=Object(p.c)((function(e){return{dataOrders:e.ws.Data,wsConnected:e.ws.wsConnected}})),a=r.dataOrders,s=r.wsConnected,o=a&&a.orders;return c.a.useEffect((function(){return t(je()),t({type:Kt.wsStart,payload:"wss://norma.nomoreparties.space/orders?token=".concat(n)}),function(){t({type:Kt.wsClose})}}),[t]),s&&o?Object(ye.jsxs)("section",{className:cn.a.profile_orders_container,children:[Object(ye.jsx)("div",{className:cn.a.profile_orders_menu,children:Object(ye.jsx)(an,{})}),Object(ye.jsx)("div",{className:cn.a.profile_orders,children:Object(ye.jsx)("ul",{className:cn.a.profile_orders_list,children:o.map((function(t,n){return Object(ye.jsx)("li",{className:cn.a.profile_order,children:Object(ye.jsx)(Re.b,{to:{pathname:"/profile/orders/".concat(t.number),state:{backgroundOrder:e}},children:Object(ye.jsx)(qt,{order:t})})},n)}))})})]}):Object(ye.jsx)(Ot,{})},ln=n(56),_n=n.n(ln),dn=n.p+"static/media/not-found-ico.8fabc218.svg";var un=function(){return Object(ye.jsxs)("section",{className:_n.a.notfound_container,children:[Object(ye.jsx)("img",{src:dn,alt:"not found"}),Object(ye.jsx)("h2",{className:_n.a.notfound_title,children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(ye.jsx)("p",{className:_n.a.notfound_paragraph,children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0442\u0430\u043a\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(ye.jsxs)(Re.b,{to:"/",children:[" ",Object(ye.jsxs)(u.Button,{type:"primary",size:"large",children:[" ","\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"," "]})]})]})},pn=function(){var e=Object(Ce.g)(),t=Object(Ce.h)(),n="PUSH"===e.action||"REPLACE"===e.action,r=n&&t.state&&t.state.backgroundIngredient,c=n&&t.state&&t.state.backgroundOrder;return Object(ye.jsxs)(Ce.c,{history:e,children:[Object(ye.jsx)(Se,{}),Object(ye.jsxs)(Ce.d,{location:r||c||t,children:[Object(ye.jsx)(Ce.b,{exact:!0,path:"/",children:Object(ye.jsx)(Nt.a,{backend:vt.a,children:Object(ye.jsxs)("section",{id:"main",className:i.a.main,children:[Object(ye.jsx)(qe,{}),Object(ye.jsx)(Ve,{})]})})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/login",children:Object(ye.jsx)(kt,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/registration",children:Object(ye.jsx)(wt,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/forgot-password",children:Object(ye.jsx)(Pt,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/reset-password",children:Object(ye.jsx)(Dt,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/feed",children:Object(ye.jsx)(nn,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/feed/:id",children:Object(ye.jsx)(gt,{})}),Object(ye.jsx)(It,{exact:!0,path:"/profile",children:Object(ye.jsx)(sn,{})}),Object(ye.jsx)(It,{exact:!0,path:"/profile/orders",children:Object(ye.jsx)(on,{})}),Object(ye.jsx)(It,{exact:!0,path:"/profile/orders/:id",children:Object(ye.jsx)(gt,{})}),Object(ye.jsx)(Ce.b,{exact:!0,path:"/ingredients/:id",children:Object(ye.jsx)(it,{})}),Object(ye.jsx)(Ce.b,{children:Object(ye.jsx)(un,{})})]}),r&&Object(ye.jsx)(Ce.b,{exact:!0,path:"/ingredients/:id",children:Object(ye.jsx)(st,{})}),c&&Object(ye.jsx)(It,{exact:!0,path:"/profile/orders/:id",children:Object(ye.jsx)(xt,{})}),c&&Object(ye.jsx)(Ce.b,{exact:!0,path:"/feed/:id",children:Object(ye.jsx)(xt,{})}),Object(ye.jsx)(pt,{}),Object(ye.jsx)($e,{})]})},jn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(ye.jsx)(p.a,{store:en,children:Object(ye.jsx)(c.a.StrictMode,{children:Object(ye.jsx)(Re.a,{children:Object(ye.jsx)(pn,{})})})}),document.getElementById("root")),jn()},18:function(e,t,n){e.exports={header_section:"AppHeader_header_section__3y5yV",header:"AppHeader_header__X9aJA",logo:"AppHeader_logo__3VxwD",logo_mobile:"AppHeader_logo_mobile__ZaEsZ",toogle_menu:"AppHeader_toogle_menu__HNI60",menu:"AppHeader_menu__1HyNT",menu_list:"AppHeader_menu_list__1uZQj",menu_item:"AppHeader_menu_item__O51DM",menu_title:"AppHeader_menu_title__3DMBL",menu_title_active:"AppHeader_menu_title_active__17ktg",profile:"AppHeader_profile__3sNBi",profile_title:"AppHeader_profile_title__31TrI",profile_title_active:"AppHeader_profile_title_active__QpIOi"}},20:function(e,t,n){e.exports={burger:"BurgerIngredients_burger__1Xcux",burger_header:"BurgerIngredients_burger_header__25kpR",burger_menu:"BurgerIngredients_burger_menu__v7GPC",ingredients:"BurgerIngredients_ingredients__1N8v2",ingredients_list:"BurgerIngredients_ingredients_list__1URN1",ingredients_title:"BurgerIngredients_ingredients_title__3HdnY",ingredients_sauce:"BurgerIngredients_ingredients_sauce__1Sd_c",ingredients_filling:"BurgerIngredients_ingredients_filling__jv8D3"}},29:function(e,t,n){e.exports={container:"ConstructorItem_container__SSIUg",container_bun_top:"ConstructorItem_container_bun_top__2QPfO",container_bun_bottom:"ConstructorItem_container_bun_bottom__29XKS",container_ingredient_info:"ConstructorItem_container_ingredient_info__3f4Og",container_ingredient_info_empty:"ConstructorItem_container_ingredient_info_empty__3xVUC",container_ingredient_name:"ConstructorItem_container_ingredient_name__a2lcM",container_ingredient_image:"ConstructorItem_container_ingredient_image__3qoZ_",container_ingredient_price:"ConstructorItem_container_ingredient_price__3Ahq9",container_ingredient_price_value:"ConstructorItem_container_ingredient_price_value__30mWm",container_button_delete:"ConstructorItem_container_button_delete__wXlSA",container_drag_icon:"ConstructorItem_container_drag_icon__2Wm0D",container_lock_icon:"ConstructorItem_container_lock_icon__1Nhqj"}},30:function(e,t,n){e.exports={input_container:"Input_input_container__1syfc",input:"Input_input__3PNbO",input_label:"Input_input_label__3xGAw",input_profile:"Input_input_profile__1-kns",input_profile_label:"Input_input_profile_label__9rnmu",input_profile_data:"Input_input_profile_data__NBs6q",input_eye:"Input_input_eye__2S-7C",input_pencil:"Input_input_pencil__2zw0D"}},33:function(e,t,n){e.exports={err_popup_container:"ErrorPopup_err_popup_container__2ck2g",err_popup_close_icon:"ErrorPopup_err_popup_close_icon__3c3n2",err_popup:"ErrorPopup_err_popup__2ha4t",err_popup_active:"ErrorPopup_err_popup_active__17yOz",err_popup_title:"ErrorPopup_err_popup_title__2ji-Q",err_popup_paragraph:"ErrorPopup_err_popup_paragraph__2CO4J"}},34:function(e,t,n){e.exports={order_container:"OrderDetails_order_container__1lTlP",order_number:"OrderDetails_order_number__PCfxk",order_title:"OrderDetails_order_title__3KFjx",order_success_icon:"OrderDetails_order_success_icon__1jSR2",order_success:"OrderDetails_order_success___0Z6P",order_alias:"OrderDetails_order_alias__1lERJ",order_info:"OrderDetails_order_info__2OFJe"}},36:function(e,t,n){e.exports={modal:"Modal_modal__P3_V5",modal_active:"Modal_modal_active__Pf397",modal_header:"Modal_modal_header__2f1jW",modal_container:"Modal_modal_container__bvzCW",modal_title:"Modal_modal_title__1K26E",modal_close_icon:"Modal_modal_close_icon__eD6BZ"}},40:function(e,t,n){e.exports={ingredient:"Ingredient_ingredient__2NNoV",ingredient_link:"Ingredient_ingredient_link__11Nxi",counter:"Ingredient_counter__VeUTx",ingredient_price:"Ingredient_ingredient_price__1z5an",ingredient_price_value:"Ingredient_ingredient_price_value__3hPmv",ingredient_name:"Ingredient_ingredient_name__2tGOq"}},48:function(e,t,n){e.exports={preloader:"Preloader_preloader__11cqP",circle_preloader:"Preloader_circle_preloader__2uN1D",spin:"Preloader_spin__27s3B",preloader__paragraph:"Preloader_preloader__paragraph__hQq6X",preloader_state_active:"Preloader_preloader_state_active__1OtYa"}},56:function(e,t,n){e.exports={notfound_container:"NotFound_notfound_container__3PLuq",notfound_title:"NotFound_notfound_title__1J6b4",notfound_paragraph:"NotFound_notfound_paragraph__VxGfD"}},6:function(e,t,n){e.exports={ingredient_section:"IngredientDetails_ingredient_section__1efBo",ingredient_container:"IngredientDetails_ingredient_container__19k0k",ingredient_image:"IngredientDetails_ingredient_image__u6N07",ingredient_title:"IngredientDetails_ingredient_title__1Hykz",ingredient_list:"IngredientDetails_ingredient_list__3Moye",ingredient_button:"IngredientDetails_ingredient_button__zKY0H",ingredient_item:"IngredientDetails_ingredient_item__2hvW4",ingredient_consist_name:"IngredientDetails_ingredient_consist_name__3TOyF",ingredient_consist_value:"IngredientDetails_ingredient_consist_value__3sJnV"}},8:function(e,t,n){e.exports={order_container:"Order_order_container__1ejV1",order:"Order_order__RDg-A",order_header:"Order_order_header__3xPJh",order_number:"Order_order_number__3JZ1C",order_date:"Order_order_date__wa_ub",order_name:"Order_order_name__1KOII",order_status:"Order_order_status__3HpKL",order_status_finished:"Order_order_status_finished__3Wih2",order_status_cancelled:"Order_order_status_cancelled__3cwnT",order_ingredients:"Order_order_ingredients__1o6Ft",order_img_container:"Order_order_img_container__1vD3C",order_img:"Order_order_img__1mDF1",order_price_container:"Order_order_price_container__3m01t",order_price:"Order_order_price__1ud0u",order_item:"Order_order_item__3_ofn",order_ingredients_container:"Order_order_ingredients_container__3VV_E",order_ingredient_item:"Order_order_ingredient_item__3zhrC",order_title:"Order_order_title__2R7kg",order_item_name:"Order_order_item_name__Zgh4b",order_total:"Order_order_total__1hq49",order_ingredient_name:"Order_order_ingredient_name__2yQ67",order_ingredient_img:"Order_order_ingredient_img__1dN3M",order_ingredient_container:"Order_order_ingredient_container__2Cf9A"}},96:function(e,t,n){e.exports={app:"App_app__1IksY",logo:"App_logo__2loz0","App-logo-spin":"App_App-logo-spin__3LF-c",header:"App_header__2MS2l",link:"App_link__19dol",main:"App_main__w13HL"}}},[[179,1,2]]]);
//# sourceMappingURL=main.29a44cb1.chunk.js.map